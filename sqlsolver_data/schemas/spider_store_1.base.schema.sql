DROP TABLE IF EXISTS albums;

DROP TABLE IF EXISTS artists;

DROP TABLE IF EXISTS customers;

DROP TABLE IF EXISTS employees;

DROP TABLE IF EXISTS genres;

DROP TABLE IF EXISTS invoices;

DROP TABLE IF EXISTS invoice_lines;

DROP TABLE IF EXISTS media_types;

DROP TABLE IF EXISTS playlists;

DROP TABLE IF EXISTS playlist_tracks;

DROP TABLE IF EXISTS tracks;


/*******************************************************************************
   Create Tables
********************************************************************************/
CREATE TABLE artists
(
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(120)
);

CREATE TABLE albums
(
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    title VARCHAR(160)  NOT NULL,
    artist_id INTEGER  NOT NULL,
    FOREIGN KEY (artist_id) REFERENCES artists (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE employees
(
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    last_name VARCHAR(20)  NOT NULL,
    first_name VARCHAR(20)  NOT NULL,
    title VARCHAR(30),
    reports_to INTEGER,
    birth_date TIMESTAMP,
    hire_date TIMESTAMP,
    address VARCHAR(70),
    city VARCHAR(40),
    state VARCHAR(40),
    country VARCHAR(40),
    postal_code VARCHAR(10),
    phone VARCHAR(24),
    fax VARCHAR(24),
    email VARCHAR(60),
    FOREIGN KEY (reports_to) REFERENCES employees (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE customers
(
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    first_name VARCHAR(40)  NOT NULL,
    last_name VARCHAR(20)  NOT NULL,
    company VARCHAR(80),
    address VARCHAR(70),
    city VARCHAR(40),
    state VARCHAR(40),
    country VARCHAR(40),
    postal_code VARCHAR(10),
    phone VARCHAR(24),
    fax VARCHAR(24),
    email VARCHAR(60)  NOT NULL,
    support_rep_id INTEGER,
    FOREIGN KEY (support_rep_id) REFERENCES employees (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE genres
(
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(120)
);

CREATE TABLE invoices
(
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    customer_id INTEGER  NOT NULL,
    invoice_date TIMESTAMP  NOT NULL,
    billing_address VARCHAR(70),
    billing_city VARCHAR(40),
    billing_state VARCHAR(40),
    billing_country VARCHAR(40),
    billing_postal_code VARCHAR(10),
    total NUMERIC(10,2)  NOT NULL,
    FOREIGN KEY (customer_id) REFERENCES customers (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE media_types
(
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(120)
);

CREATE TABLE tracks
(
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(200)  NOT NULL,
    album_id INTEGER,
    media_type_id INTEGER  NOT NULL,
    genre_id INTEGER,
    composer VARCHAR(220),
    milliseconds INTEGER  NOT NULL,
    bytes INTEGER,
    unit_price NUMERIC(10,2)  NOT NULL,
    FOREIGN KEY (album_id) REFERENCES albums (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION,
    FOREIGN KEY (genre_id) REFERENCES genres (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION,
    FOREIGN KEY (media_type_id) REFERENCES media_types (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE invoice_lines
(
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    invoice_id INTEGER  NOT NULL,
    track_id INTEGER  NOT NULL,
    unit_price NUMERIC(10,2)  NOT NULL,
    quantity INTEGER  NOT NULL,
    FOREIGN KEY (invoice_id) REFERENCES invoices (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION,
    FOREIGN KEY (track_id) REFERENCES tracks (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION
);

CREATE TABLE playlists
(
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(120)
);

CREATE TABLE playlist_tracks
(
    playlist_id INTEGER  NOT NULL,
    track_id INTEGER  NOT NULL,
    CONSTRAINT PK_PlaylistTrack PRIMARY KEY  (playlist_id, track_id),
    FOREIGN KEY (playlist_id) REFERENCES playlists (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION,
    FOREIGN KEY (track_id) REFERENCES tracks (id)
    ON DELETE NO ACTION ON UPDATE NO ACTION
);


/*******************************************************************************
   Create Primary Key Unique Indexes
********************************************************************************/












/*******************************************************************************
   Create Foreign Keys
********************************************************************************/
CREATE INDEX index_album_on_artist_id ON albums (artist_id);

CREATE INDEX index_customers_on_support_rep_id ON customers (support_rep_id);

CREATE INDEX index_employees_on_reports_to ON employees (reports_to);

CREATE INDEX index_invoices_on_customer_id ON invoices (customer_id);

CREATE INDEX index_invoice_lines_on_invoice_id ON invoice_lines (invoice_id);

CREATE INDEX index_invoice_lines_on_track_id ON invoice_lines (track_id);

CREATE INDEX index_playlist_tracks_on_track_id ON playlist_tracks (track_id);

CREATE INDEX index_tracks_on_album_id ON tracks (album_id);

CREATE INDEX index_track_on_genre_id ON tracks (genre_id);

CREATE INDEX index_track_on_media_type_id ON tracks (media_type_id);


/*******************************************************************************
   Populate Tables
********************************************************************************/

































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































